<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<head>

<link rel="icon" href="http://tac-alert01/favicon.ico" type="image/x-icon">
<script type="text/javascript" src="js/modernizr.js"></script>
  <!-- // LOAD MODERNIZR FIRST for legacy browser interaction -->
    <title>TAC PREFERENCES</title>
<link rel="stylesheet" type="text/css" href="css/jqUI.css">
<link rel="stylesheet" type="text/css" href="Metro-ui/min/metro-bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="Metro-ui/min/iconFont.min.css">
<link rel="stylesheet" type="text/css" href="Metro-ui/min/metro-bootstrap-responsive.min.css">


</head>

<body class="metro">

<div class="container" id="TACPref" class="span6">
<h1>Preferences</h1>

<h3>Colors:</h3>
<form id="setOpts" name="TACOptions" type="POST" action="#">

Background:
<div class="input-control" >
    <label for="white">
        <input type="radio" name="bg" value="#FFFFFF" data-transform="input-control" />
    <b class='bg-white fg-black bd-black'> White</b>
    </label>
</div>

<div class="input-control" >
    <label for="Black">
        <input type="radio" name="bg" value="#000000" data-transform="input-control" checked />
    <b class='fg-white bg-black'>Black</b>
    </label>
</div>

<hr width="50%">

Font:
<div class="input-control">
    <label for="Open_Sans">
        <input type="radio" name="font" value="Open Sans"  data-transform="input-control" checked />
    <font face="Open Sans">Open Sans</font>
    </label>

    <label for="Consolas">       
        <input type="radio" name="font" Value="Consolas" data-transform="input-control" />
     <font face="Consolas">Consolas</font>
    </label>

    <label for="IMPACT">       
        <input type="radio" name="font" Value="IMPACT" data-transform="input-control" />
     <font face="IMPACT">IMPACT</font>
    </label>
</div>

<hr width="50%">

Text:
<div class="input-control">
    <label>
        <input type="radio" name="color" value="White"  data-transform="input-control" checked />
    <b class="bg-black fg-white">White Font</b>
    </label>

    <label>       
        <input type="radio" name="color" Value="Black" data-transform="input-control" />
     <b class="bg-white fg-black">Black Font</b>
    </label>

    <label>       
        <input type="radio" name="color" Value="Red" data-transform="input-control" />
     <b class="bg-black fg-red">Red Font</b>
    </label>
</div>
</form>
<button id="savePref" type="submit" value="submit" class='large'>Save Preferences</button> <button type="reset" class="large danger">CANCEL</button>
<br>
<hr>
<br>
</div> <!-- //CLOSE #TACPref -->


<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.11.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jQuery_Plugins.js"></script>
<script type="text/javascript" src="js/metro.min.js"></script>

<script>
function setOpts() {
var prefs = [];
	      var promise = $('#setOpts input[type="radio"]:checked').each(function(){
		  var val= $(this).val();
	        prefs.push(val);
	      }).promise();
		  promise.done( function() {
              localStorage.removeItem("TEST");
            console.log("radio values: "+JSON.stringify(prefs) );
            localStorage.setItem("TEST", JSON.stringify(prefs) );
		  });

		  $("#savePref").prop("disabled", true);
		  $("#tacPref").html("<h1>Preferences saved!</h1>").fadeIn(1000);
}

$(document).ready(function(){
  var testStorage = localStorage.getItem("TEST");
   var prefs = []; 
    if (testStorage){  	
      var storage = JSON.parse(testStorage);
	    $.when( $(storage).each( function(index, data) {
	      prefs.push(data);
	    }) ).then(function() {
		   JSON.stringify(prefs);
		   console.log("Prefs stored: "+ JSON.stringify(prefs) );
		 });		
	    // console.log("data: "+data);
 	}

  $(document).on("click","#savePref", function(){
    setOpts();
    return false;
  });        
});
</script>
</body>
</html>
